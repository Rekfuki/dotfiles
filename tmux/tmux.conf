# vim: foldmethod=marker

# General {{{

# Use Ctrl+A as the leader
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Force a reload of the tmux.conf file
unbind r
bind r source-file ~/.tmux.conf \; move-window -r\;  display "~/tmux.conf reloaded!"

# Use xterm-256color
set -ga terminal-overrides ",xterm-256color:Tc"
set -g default-terminal "tmux-256color"

# Use vi mappings
setw -g mode-keys vi

# Enable copy with mouse
set -g mouse on
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "xclip -se c -i"

# Setup 'v' to begin selection as in Vim
bind -T copy-mode-vi 'v' send-keys -X begin-selection
bind -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

# Start window and pane indices at 1
set -g base-index 1
setw -g pane-base-index 1

# Automatically renumber tmux windows
set -g renumber-windows on

# Activity monitoring
setw -g monitor-activity off
set -g visual-activity off
set -g visual-bell off

# Length of the history
set -g history-limit 100000

# For sending commands to nested tmux sessions
bind-key a send-prefix

# Toggle synchronize-panes
bind y set-window-option synchronize-panes

# }}}

# Key bindings {{{

# Smart pane switching with awareness of Vim splits.
PILOT_ROOT=$HOME/dotfiles/nvim/plugged/vim-tmux-pilot
source-file $PILOT_ROOT/pilot.tmux

# Don't prompt to kill panes/windows.
bind x kill-pane
bind & kill-window

# Set window split
bind s split-window -h -c "#{pane_current_path}"
bind o split-window -c "#{pane_current_path}"

# Resizing panes
bind z resize-pane -Z
bind - resize-pane -D 20
bind + resize-pane -U 20
bind < resize-pane -L 20
bind > resize-pane -R 20

# }}}

# Plugins {{{
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'arcticicestudio/nord-tmux'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run -b '~/.tmux/plugins/tpm/tpm'

# }}}
